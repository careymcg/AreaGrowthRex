styler()
styler:::style_active_file()
styler:::style_active_file()
styler:::style_active_file()
styler:::style_active_file()
library(AreaGrowthRex)
library(AreaGrowthRex)
knitr::opts_chunk$set(echo = TRUE)
library(AreaGrowthRex)
M1 <- file.path("ss", "OneArea_NoFages")
M2 <- file.path("ss", "OneArea_Fages")
M3 <- file.path("ss", "TwoArea_NoFages")
M4 <- file.path("ss", "TwoArea_Fages")
Mlab.1 <- "OneArea_NoFages"
Mlab.2 <- "OneArea_Fages"
Mlab.3 <- "TwoArea_NoFages"
Mlab.4 <- "TwoArea_Fages"
Mlabels <- c(Mlab.1, Mlab.2, Mlab.3, Mlab.4)
MasterList <- r4ss::SSgetoutput(dirvec = c(M1, M2, M3, M4), getcomp = TRUE, getcovar = TRUE)
debugonce(plot_comp_compare)
plot_comp_compare(ssruns = MasterList, narea = 1, mnames = Mlabels,comptype = "length")
nmodel
debug(get_lengths)
nmodel
biglen.t
print(biglen.t)
print(biglen.t,n = 5)
View(biglen.t)
nrow(biglen.t %>% filter(Yr == 1982))
nrow(biglen.t %>% filter(.data$Yr == 1982))
library(AreaGrowthRex)
library(AreaGrowthRex)
library(AreaGrowthRex)
knitr::opts_chunk$set(echo = TRUE)
library(AreaGrowthRex)
# MyOutput = r4ss::SS_output(dir = M1,covar = TRUE,forecast=TRUE)
# r4ss::SS_plots(replist = MyOutput,uncertainty=TRUE) #, plot = 2:24)
#
# MyOutput = r4ss::SS_output(dir = M2,covar = TRUE,forecast=TRUE)
# r4ss::SS_plots(replist = MyOutput,uncertainty=TRUE) #, plot = 2:24)
#
# MyOutput = r4ss::SS_output(dir = M3,covar = TRUE,forecast=TRUE)
# r4ss::SS_plots(replist = MyOutput,uncertainty=TRUE) #, plot = 2:24)
#
# MyOutput = r4ss::SS_output(dir = M4,covar = TRUE,forecast=TRUE)
# r4ss::SS_plots(replist = MyOutput,uncertainty=TRUE) #, plot = 2:24)
M1 <- file.path("ss", "OneArea_NoFages")
M2 <- file.path("ss", "OneArea_Fages")
M3 <- file.path("ss", "TwoArea_NoFages")
M4 <- file.path("ss", "TwoArea_Fages")
Mlab.1 <- "OneArea_NoFages"
Mlab.2 <- "OneArea_Fages"
Mlab.3 <- "TwoArea_NoFages"
Mlab.4 <- "TwoArea_Fages"
Mlabels <- c(Mlab.1, Mlab.2, Mlab.3, Mlab.4)
MasterList <- r4ss::SSgetoutput(dirvec = c(M1, M2, M3, M4), getcomp = TRUE, getcovar = TRUE)
names(MasterList)
ssruns = MasterList
narea = 1
mnames = Mlabels
comptype = "length"
nmodel <- length(ssruns)
nmodel
biglen.df <- data.frame()
biglen.df
if (comptype == "length") {
biglen.t<-get_lengths(ssruns,mnames)
} else { #if comptype =="ages"
biglen.t<-get_ages(ssruns,mnames)
}
head(biglen.t)
unique(biglen.t$Kind)
unique(biglen.t$Subseas)
unique(biglen.t$Fleet)
unique(biglen.t$mname)
names(biglen.t)
unique(biglen.t$YrSeasName)
one.t <- biglen.t %>%
dplyr::filter(.data$mname == "OneArea_NoFages" | .data$mname == "OneArea_Fages") %>%
dplyr::select(.data$Yr, .data$Fleet, .data$Sex, .data$Bin, .data$Obs, .data$Exp, .data$mname)
one.t
unique(one.t$mname)
one2.t <- one.t %>%
dplyr::group_by(.data$Fleet, .data$Sex, .data$Bin, .data$mname) %>%
dplyr::summarise(SumObs = sum(.data$Obs), SumExp = sum(.data$Exp))
thesum.t <- one2.t %>%
dplyr::group_by(.data$Fleet, .data$Sex, .data$mname) %>%
dplyr::summarise(TotObs = sum(.data$SumObs), TotExp = sum(.data$SumExp))
one3.t <- dplyr::left_join(one2.t, thesum.t)
one4.t <- one3.t %>% dplyr::mutate(Obs = .data$SumObs / .data$TotObs, Exp = .data$SumExp / .data$TotExp)
check <- one4.t %>%
dplyr::group_by(.data$Fleet, .data$Sex, .data$mname) %>%
dplyr::summarise(checkobs = sum(.data$Obs), checkexp = sum(.data$Exp))
one5.t <- one4.t %>% dplyr::select(.data$Fleet, .data$Sex, .data$Bin, .data$Obs, .data$Exp, .data$mname)
sex.labs <- c("Females", "Males")
names(sex.labs) <- c("1", "2")
fleet.labs <- c("Fishery", "Survey")
names(fleet.labs) <- c("1", "2")
one2.t
398*2
one5.t
names(replist1)
names(ssruns$replist1)
names(ssruns$replist1$lendbase)
unique(ssruns$replist1$lendbase$Used)
unique(ssruns$replist1$lendbase$Kind)
unique(ssruns$replist1$lendbase$Time)
unique(ssruns$replist1$lendbase$Yr)
unique(ssruns$replist1$lendbase$Seas)
unique(ssruns$replist1$lendbase$SubSeas)
unique(ssruns$replist1$lendbase$Subseas)
unique(ssruns$replist1$lendbase$Month)
unique(ssruns$replist1$lendbase$Repl)
unique(ssruns$replist1$lendbase$Area)
unique(ssruns$replist1$lendbase$Sex)
unique(ssruns$replist1$lendbase$Yr)
unique(ssruns$replist2$lendbase$Yr)
head(one.t)
head(biglen.t)
biglen.t<-biglen.t %>% dplyr::mutate(.data$Obs=.data$Obs*.data$Nsamp_adj,.data$Exp = .data$Exp*.data$Nsamp_adj)
biglen.t<-biglen.t %>% dplyr::mutate(Obs=.data$Obs*.data$Nsamp_adj,Exp = .data$Exp*.data$Nsamp_adj)
head(biglen.t)
if (narea == 1) {
one.t <- biglen.t %>%
dplyr::filter(.data$mname == "OneArea_NoFages" | .data$mname == "OneArea_Fages") %>%
dplyr::select(.data$Yr, .data$Fleet, .data$Sex, .data$Bin, .data$Obs, .data$Exp, .data$mname)
}
head(one.t)
biglen.t$Nsamp_adj
library(AreaGrowthRex)
rm(list=ls(all=TRUE))
library(AreaGrowthRex)
library(AreaGrowthRex)
knitr::opts_chunk$set(echo = TRUE)
library(AreaGrowthRex)
M1 <- file.path("ss", "OneArea_NoFages")
M2 <- file.path("ss", "OneArea_Fages")
M3 <- file.path("ss", "TwoArea_NoFages")
M4 <- file.path("ss", "TwoArea_Fages")
Mlab.1 <- "OneArea_NoFages"
Mlab.2 <- "OneArea_Fages"
Mlab.3 <- "TwoArea_NoFages"
Mlab.4 <- "TwoArea_Fages"
Mlabels <- c(Mlab.1, Mlab.2, Mlab.3, Mlab.4)
MasterList <- r4ss::SSgetoutput(dirvec = c(M1, M2, M3, M4), getcomp = TRUE, getcovar = TRUE)
#SummaryList <- r4ss::SSsummarize(MasterList)
debugonce(plot_comp_compare)
plot_comp_compare(ssruns = MasterList, narea = 1, mnames = Mlabels,comptype = "length")
biglen.t$Obs[biglen.t$Yr == 2005]
biglen1.t$Obs[biglen1.t$Yr == 2005]
lfits
library(AreaGrowthRex)
knitr::opts_chunk$set(echo = TRUE)
library(AreaGrowthRex)
M1 <- file.path("ss", "OneArea_NoFages")
M2 <- file.path("ss", "OneArea_Fages")
M3 <- file.path("ss", "TwoArea_NoFages")
M4 <- file.path("ss", "TwoArea_Fages")
Mlab.1 <- "OneArea_NoFages"
Mlab.2 <- "OneArea_Fages"
Mlab.3 <- "TwoArea_NoFages"
Mlab.4 <- "TwoArea_Fages"
Mlabels <- c(Mlab.1, Mlab.2, Mlab.3, Mlab.4)
MasterList <- r4ss::SSgetoutput(dirvec = c(M1, M2, M3, M4), getcomp = TRUE, getcovar = TRUE)
#SummaryList <- r4ss::SSsummarize(MasterList)
names(MasterList)
names(MasterList$replist1)
debugonce(plot_comp_compare)
plot_comp_compare(ssruns = MasterList, narea = 1, mnames = Mlabels,comptype = "length")
nmodel
debugonce(get_lengths)
ssruns[[1]]$lendbase
biglen.df
head(biglen.df)
View(biglen.df)
glimpse(biglen.df)
View(biglen.df)
library(AreaGrowthRex)
library(AreaGrowthRex)
rm(list=ls(all=TRUE))
library(AreaGrowthRex)
library(AreaGrowthRex)
use_package("viridis")
library(AreaGrowthRex)
library(AreaGrowthRex)
library(AreaGrowthRex)
rm(list=ls(all=TRUE))
library(AreaGrowthRex)
library(AreaGrowthRex)
rm(list=ls(all=TRUE))
library(AreaGrowthRex)
library(AreaGrowthRex)
library(AreaGrowthRex)
rm(list=ls(all=TRUE))
library(AreaGrowthRex)
library(AreaGrowthRex)
rm(list=ls(all=TRUE))
library(AreaGrowthRex)
library(AreaGrowthRex)
use_package("ggthemes")
library(AreaGrowthRex)
library(AreaGrowthRex)
rm(list=ls(all=TRUE))
library(AreaGrowthRex)
library(AreaGrowthRex)
ssruns = MasterList
knitr::opts_chunk$set(echo = TRUE)
library(AreaGrowthRex)
M1 <- file.path("ss", "OneArea_NoFages")
M2 <- file.path("ss", "OneArea_Fages")
M3 <- file.path("ss", "TwoArea_NoFages")
M4 <- file.path("ss", "TwoArea_Fages")
Mlab.1 <- "OneArea_NoFages"
Mlab.2 <- "OneArea_Fages"
Mlab.3 <- "TwoArea_NoFages"
Mlab.4 <- "TwoArea_Fages"
Mlabels <- c(Mlab.1, Mlab.2, Mlab.3, Mlab.4)
MasterList <- r4ss::SSgetoutput(dirvec = c(M1, M2, M3, M4), getcomp = TRUE, getcovar = TRUE)
#SummaryList <- r4ss::SSsummarize(MasterList)
library(dplyr)
library(ggplot2)
library(viridis)
ssruns
ssruns = MasterList
narea = 1
mnames = Mlabels
comptype = "length"
nmodel <- length(ssruns)
biglen.df <- data.frame()
if (comptype == "length") {
biglen.t<-get_lengths(ssruns,mnames)
} else { #if comptype =="ages"
biglen.t<-get_ages(ssruns,mnames)
}
head(biglen.t)
is.factor(biglen.t$Bin)
is.numeric(biglen.t$Bin)
biglen1.t<-biglen.t %>% mutate(Obs=Obs*Nsamp_adj,Exp = Exp*Nsamp_adj)
head(biglen1.t)
head(biglen.t$Obs)
head(biglen1.t$Obs)
if (narea == 1) {
one.t <- biglen1.t %>%
filter(mname == "OneArea_NoFages" | mname == "OneArea_Fages") %>%
select(Yr, Fleet, Sex, Bin, Obs, Exp, mname)
}
unique(biglen1.t$mnames)
unique(biglen1.t$mname)
unique(one.t$mname)
head(one.t)
one.t[one.t$Yr == 1982,]
one2.t <- one.t %>%
group_by( Fleet,  Sex,  Bin,  mname) %>%
summarise(SumObs = sum( Obs), SumExp = sum( Exp))
thesum.t <- one2.t %>%
group_by( Fleet,  Sex,  mname) %>%
summarise(TotObs = sum( SumObs), TotExp = sum( SumExp))
thesum.t
one2.t
one3.t <- left_join(one2.t, thesum.t)
one3.t
one4.t <- one3.t %>% mutate(Obs =  SumObs /  TotObs, Exp =  SumExp /  TotExp)
check <- one4.t %>%
group_by( Fleet,  Sex,  mname) %>%
summarise(checkobs = sum( Obs), checkexp = sum( Exp))
one4.t
check
one4.t
one5.t <- one4.t %>% select( Fleet,  Sex,  Bin,  Obs,  Exp,  mname)
one5.t
sex.labs <- c("Females", "Males")
names(sex.labs) <- c("1", "2")
fleet.labs <- c("Fishery", "Survey")
names(fleet.labs) <- c("1", "2")
onetry.t<-one5.t %>% filter(mname=="OneArea_NoFages")
lfits <- one5.t %>% ggplot(aes(x=Bin,y=Obs,color=mname)) +
geom_bar(stat='identity', alpha = 0.4) +
geom_line(aes(y = Exp ),stat='identity') +
facet_grid(Fleet~Sex, labeller = labeller(Sex = sex.labs, Fleet = fleet.labs)) +
labs(x = "Length (cm)", y = "Proportion") +
ggthemes::theme_few() ; lfits
lfits
lfits
lfits <- ggplot(one5.t) +
geom_bar(aes(x =  Bin, y =  Obs,color =  mname),stat='identity', alpha = 0.4) +
#geom_polygon(aes(x =  Bin, y =  Obs), fill = "lightblue", alpha = 0.4) +
geom_line(data = one5.t,aes(x = as.numeric( Bin), y =  Exp, color =  mname)) +
#geom_line(data = one5.t,aes(x =  Bin,y =  Exp, color =  mname),stat = 'identity') +
facet_grid(Fleet ~ Sex, labeller = labeller(Sex = sex.labs, Fleet = fleet.labs)) +
labs(x = "Bin", y = "Proportion")
lfits
lfits
lfits <- ggplot(one5.t) +
geom_bar(aes(x =  Bin, y =  Obs),stat='identity', alpha = 0.4) +
#geom_polygon(aes(x =  Bin, y =  Obs), fill = "lightblue", alpha = 0.4) +
geom_line(data = one5.t,aes(x = as.numeric( Bin), y =  Exp)) +
#geom_line(data = one5.t,aes(x =  Bin,y =  Exp, color =  mname),stat = 'identity') +
facet_grid(Fleet ~ Sex, labeller = labeller(Sex = sex.labs, Fleet = fleet.labs)) +
labs(x = "Bin", y = "Proportion")
lfits
lfits
lfits <- ggplot(one5.t) +
geom_bar(aes(x =  Bin, y =  Obs),stat='identity', alpha = 0.4)
lfits
one5.t
unique(one5.t$mname)
lfits <- ggplot(onetry.t) +
geom_bar(aes(x =  Bin, y =  Obs),stat='identity', alpha = 0.4) +
#geom_polygon(aes(x =  Bin, y =  Obs), fill = "lightblue", alpha = 0.4) +
geom_line(data = one5.t,aes(x = as.numeric( Bin), y =  Exp)) +
#geom_line(data = one5.t,aes(x =  Bin,y =  Exp, color =  mname),stat = 'identity') +
facet_grid(Fleet ~ Sex, labeller = labeller(Sex = sex.labs, Fleet = fleet.labs)) +
labs(x = "Bin", y = "Proportion")
lfits
lfits
onetry.t
is.factor(onetry.t$Bin)
lfits <- ggplot(onetry.t) +
geom_bar(aes(x =  as.factor(Bin), y =  Obs),stat='identity', alpha = 0.4) +
#geom_polygon(aes(x =  Bin, y =  Obs), fill = "lightblue", alpha = 0.4) +
geom_line(data = one5.t,aes(x = as.numeric( Bin), y =  Exp)) +
#geom_line(data = one5.t,aes(x =  Bin,y =  Exp, color =  mname),stat = 'identity') +
facet_grid(Fleet ~ Sex, labeller = labeller(Sex = sex.labs, Fleet = fleet.labs)) +
labs(x = "Bin", y = "Proportion")
lfits
lfits
lfits <- ggplot(onetry.t) +
geom_bar(aes(x =Bin, y =  Obs),stat='identity', alpha = 0.4) +
geom_line(data = onetry.t,aes(x = as.numeric( Bin), y =  Exp)) +
facet_grid(Fleet ~ Sex, labeller = labeller(Sex = sex.labs, Fleet = fleet.labs)) +
labs(x = "Bin", y = "Proportion")
lfits
lfits
rm(list=ls(all=TRUE))
OneArea_NoFages
rm(list = ls(all=TRUE))
library(AreaGrowthRex)
library(AreaGrowthRex)
library(AreaGrowthRex)
rm(list = ls(all=TRUE))
library(AreaGrowthRex)
knitr::opts_chunk$set(echo = TRUE)
library(AreaGrowthRex)
M1 <- file.path("ss", "OneArea_NoFages")
M2 <- file.path("ss", "OneArea_Fages")
M3 <- file.path("ss", "TwoArea_NoFages")
M4 <- file.path("ss", "TwoArea_Fages")
Mlab.1 <- "OneArea_NoFages"
Mlab.2 <- "OneArea_Fages"
Mlab.3 <- "TwoArea_NoFages"
Mlab.4 <- "TwoArea_Fages"
Mlabels <- c(Mlab.1, Mlab.2, Mlab.3, Mlab.4)
MasterList <- r4ss::SSgetoutput(dirvec = c(M1, M2, M3, M4), getcomp = TRUE, getcovar = TRUE)
#SummaryLis
plot_comp_compare(ssruns = MasterList, narea = 1, mnames = Mlabels,comptype = "length")
library(AreaGrowthRex)
library(AreaGrowthRex)
rm(list=ls(all=TRUE))
library(AreaGrowthRex)
knitr::opts_chunk$set(echo = TRUE)
library(AreaGrowthRex)
M1 <- file.path("ss", "OneArea_NoFages")
M2 <- file.path("ss", "OneArea_Fages")
M3 <- file.path("ss", "TwoArea_NoFages")
M4 <- file.path("ss", "TwoArea_Fages")
Mlab.1 <- "OneArea_NoFages"
Mlab.2 <- "OneArea_Fages"
Mlab.3 <- "TwoArea_NoFages"
Mlab.4 <- "TwoArea_Fages"
Mlabels <- c(Mlab.1, Mlab.2, Mlab.3, Mlab.4)
MasterList <- r4ss::SSgetoutput(dirvec = c(M1, M2, M3, M4), getcomp = TRUE, getcovar = TRUE)
#SummaryList <- r4ss::SSsummarize(MasterList)
plot_comp_compare(ssruns = MasterList, narea = 1, mnames = Mlabels,comptype = "length")
Mlabels
library(AreaGrowthRex)
rm(list = ls(all=TRUE))
library(AreaGrowthRex)
library(AreaGrowthRex)
library(AreaGrowthRex)
library(AreaGrowthRex)
library(AreaGrowthRex)
library(AreaGrowthRex)
library(AreaGrowthRex)
rm(list=ls(all=TRUE))
library(AreaGrowthRex)
library(AreaGrowthRex)
library(AreaGrowthRex)
library(AreaGrowthRex)
library(AreaGrowthRex)
library(AreaGrowthRex)
library(AreaGrowthRex)
library(AreaGrowthRex)
library(AreaGrowthRex)
library(AreaGrowthRex)
library(AreaGrowthRex)
library(AreaGrowthRex)
library(AreaGrowthRex)
library(AreaGrowthRex)
library(AreaGrowthRex)
library(AreaGrowthRex)
library(AreaGrowthRex)
library(AreaGrowthRex)
library(AreaGrowthRex)
library(AreaGrowthRex)
library(AreaGrowthRex)
library(AreaGrowthRex)
library(AreaGrowthRex)
library(AreaGrowthRex)
library(AreaGrowthRex)
library(AreaGrowthRex)
library(AreaGrowthRex)
library(AreaGrowthRex)
library(AreaGrowthRex)
library(AreaGrowthRex)
library(AreaGrowthRex)
library(AreaGrowthRex)
library(AreaGrowthRex)
library(AreaGrowthRex)
library(AreaGrowthRex)
MasterList
knitr::opts_chunk$set(echo = TRUE)
library(AreaGrowthRex)
M1 <- file.path("ss", "OneArea_NoFages")
M2 <- file.path("ss", "OneArea_Fages")
M3 <- file.path("ss", "TwoArea_NoFages")
M4 <- file.path("ss", "TwoArea_Fages")
Mlab.1 <- "OneArea_NoFages"
Mlab.2 <- "OneArea_Fages"
Mlab.3 <- "TwoArea_NoFages"
Mlab.4 <- "TwoArea_Fages"
Mlabels <- c(Mlab.1, Mlab.2, Mlab.3, Mlab.4)
MasterList <- r4ss::SSgetoutput(dirvec = c(M1, M2, M3, M4), getcomp = TRUE, getcovar = TRUE)
#SummaryList <- r4ss::SSsummarize(MasterList)
p<-plot_comp_compare(ssruns = MasterList, narea = 1, mnames = Mlabels,comptype = "length")
p
p$combo
p$noages
p$ages
q<-plot_comp_compare(ssruns = MasterList, narea = 1, mnames = Mlabels,comptype = "age")
q
debugonce(plot_comp_compare)
q<-plot_comp_compare(ssruns = MasterList, narea = 1, mnames = Mlabels,comptype = "age")
lfits
onetry.t
twotry.t
View(onetry.t)
View(twotry.t)
lcombo
library(AreaGrowthRex)
library(AreaGrowthRex)
library(AreaGrowthRex)
library(AreaGrowthRex)
library(AreaGrowthRex)
library(AreaGrowthRex)
library(AreaGrowthRex)
library(AreaGrowthRex)
library(AreaGrowthRex)
285-15
285*0.85
285*0.8
install.packages(c("boot", "class", "codetools", "foreign", "MASS", "Matrix", "nlme", "spatial", "survival"))
find.package("TMB")
find.package("tibble")
find.package("MASS")
library(tibble)
library(tibble)
install.packages("tibble")
library(tibble)
install.packages("rlang")
library(tibble)
install.packages("rlang")
install.packages("tibble")
library(tibble)
install.packages("magrittr")
library(tibble)
library(tibble)
install.packages("rlang")
install.packages("rlang")
library(tibble)
install.packages("utf8")
library(tibble)
library(tidyverse)
install.packages("broom")
library(tidyverse)
install.packages("DBI")
library(tidyverse)
install.packages("scales")
library(tidyverse)
install.packages("colorspace")
library(tidyverse)
install.packages("haven")
library(tidyverse)
install.packages("ellipsis")
library(tidyverse)
install.packages("elliplis")
library(tidyverse)
install.packages("ellipsis")
library(tidyverse)
library(tidyverse)
install.packages("tidyverse")
install.packages(c("bit", "boot", "bslib"))
install.packages(c("callr", "class", "codetools", "curl"))
install.packages(c("data.table", "dbplyr", "downlit", "farver", "fontawesome", "forcats", "foreign"))
install.packages(c("gargle", "ggplot2", "gh", "gitcreds", "googlesheets4", "gtable", "gtools"))
library(ggplot2)
install.packages(c("highr", "hms", "httr", "isoband", "MASS", "Matrix", "modelr"))
install.packages(c("nlme", "ps", "R.cache", "R.methodsS3", "R.oo", "R.utils", "reprex", "roxygen2", "rstudioapi", "rversions"))
install.packages(c("rvest", "shiny", "sourcetools", "spatial", "survival", "sys", "viridisLite", "whisker", "zip"))
getwd()
library(AreaGrowthRex)
library(AreaGrowthRex)
library(AreaGrowthRex)
